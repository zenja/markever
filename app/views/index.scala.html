<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Markever</title>

    <link rel="stylesheet" media="screen" href='@routes.Assets.at("/public/stylesheets", "bootstrap.min.css")'>
    <link rel="stylesheet" media="screen" href='@routes.Assets.at("/public/stylesheets", "railscasts.css")'>
    <link rel="stylesheet" media="screen" href='@routes.Assets.at("/public/stylesheets", "main.css")'>
    <link rel="shortcut icon" type="image/png" href='@routes.Assets.at("/public/images", "favicon.ico")'>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <!-- TODO: host the MathJax resources locally -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body ng-app="markever" ng-controller="EditorController as main">
    <div id="toolbar">
        <img id="toolbar_logo" src='@routes.Assets.at("/public/images", "logo.png")' alt="logo" />
        <div class="btn-group">
            <button class="btn btn-circle" ng-click='main.open_ok_modal("hi...")'>
                <span class="glyphicon glyphicon-header" aria-hidden="true"></span>
            </button>
        </div>
        <div class="btn-group">
            <button class="btn btn-circle" ng-click="main.save_note()">
                <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
            </button>
        </div>
        <div class="btn-group" dropdown>
            <button class="btn btn-circle dropdown-toggle" dropdown-toggle ng-click="main.refresh_all_notes()">
                <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li ng-repeat="note in main.all_notes['notes']">
                    <a href ng-click="main.load_note(note.guid)">{{note.title}}</a>
                </li>
            </ul>
        </div>
    </div>
    <div id="md_div">
        <div id="md_editor_div" ng-model="main.note.markdown" ng-change="main.md2html()" ui-ace="{
            useWrapMode : true,
            showGutter: false,
            mode: 'markdown',
            onLoad: aceLoaded,
            onChange: aceChanged
        }"></div>
        <div id="md_html_div" ng-bind-html="main.htmlSafe"></div>
    </div>
    <div id="md_html_div_hidden" ng-bind-html="main.htmlSafe" style="visibility:hidden;height:1px;overflow:hidden;z-index:0;"></div>

    <!-- loading indicator modal -->
    <script type="text/ng-template" id="modal-loading.html">
        <div class="modal-body">
            <p>Loading the note...</p>
            <progressbar class="progress-striped active" value="100" type="success" />
        </div>
    </script>

    <!-- normal modal with a msg and a ok button -->
    <script type="text/ng-template" id="modal-ok.html">
        <div class="modal-body">
            <p>{{msg}}</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" ng-click="$close('ok')">OK</button>
        </div>
    </script>

    <script src='@routes.Assets.at("/public/javascripts", "jquery-1.11.0.min.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "marked.min.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "highlight.pack.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "jquery.htmlClean.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "jquery.inlineStyler.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "ace.min.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "mode-markdown.js")' type="text/javascript"></script>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js' type="text/javascript"></script>
    <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-resource.min.js' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "ui-bootstrap-tpls-0.12.0.min.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "ui-ace.min.js")' type="text/javascript"></script>
    <script src='@routes.Assets.at("/public/javascripts", "app-ng.js")' type="text/javascript"></script>
</body>
</html>
